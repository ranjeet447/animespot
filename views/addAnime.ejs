<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <% include ./components/aHeader %>
</head>

<body>
  <div class="container">
    <br>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addAnimeModal">Add new
      Anime</button>
    <br>
    <div class="table-responsive">
      <table class="table table-hover table-sm">
        <% if(data){%>
        <% data.forEach(function(a,i){%>
        <tr>
          <td><a href="/admin/addS/<%-a.name%>"><%-i+1%>.<%- a.name%> </a></td>
          <td>
            <a href="#" class="btn btn-sm btn-secondary" data-toggle="modal" data-target="#editAnimeModal<%-a._id%>"
              style="float:right;">
              <i class="fa fa-edit " aria-hidden="true"></i>
            </a>
          </td>
          <td>
            <a href="#" class="btn btn-sm btn-danger" aria-label="Delete" style="float:right;">
              <i class="fa fa-trash-o" aria-hidden="true"></i>
            </a>
          </td>
        </tr>
        <!-- Edit Anime Modal -->
        <div class="modal" id="editAnimeModal<%-a._id%>">
          <div class="modal-dialog">
            <div class="modal-content">
              <!--Edit Anime Modal Header -->
              <div class="modal-header">
                <h4 class="modal-title">Edit <%-a.name%></h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>
              <!--Edit Anime Modal body -->
              <div class="modal-body">
                <form action="/admin/editAnime/<%-a._id%>" method="POST">
                  <div class="form-group">
                    <label for="name">Name</label>
                    <input type="name" name="name" class="form-control" id="name" value="<%-a.name%>" placeholder="name" autofocus required>
                  </div>
                  <div class="form-group">
                    <label for="image">Image Id</label>
                    <input type="text" name="image" class="form-control" value="<%-a.image%>"  id="image" placeholder="image ID">
                  </div>
                  <div class="form-group">
                    <label for="description">Description</label>
                    <textarea type="text" name="description" rows="5"  class="form-control" id="description"><%-a.description%></textarea>
                  </div>
                  <div class="form-group">
                    <label for="genre">Genre</label><br>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Action')?'checked':'') %>  name="genre" value="Action">Action</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Adventure')?'checked':'') %> name="genre"
                        value="Adventure">Adventure</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Comedy')?'checked':'') %> name="genre" value="Comedy">Comedy</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Drama')?'checked':'') %> name="genre" value="Drama">Drama</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Fantasy')?'checked':'') %> name="genre" value="Fantasy">Fantasy</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Game')?'checked':'') %> name="genre" value="Game">Game</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Historical')?'checked':'') %> name="genre"
                        value="Historical">Historical</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Horror')?'checked':'') %> name="genre" value="Horror">Horror</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Magic')?'checked':'') %> name="genre" value="Magic">Magic</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Martial Arts')?'checked':'') %> name="genre" value="Martial Arts">Martial
                      Arts</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Music')?'checked':'') %> name="genre" value="Music">Music</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Mystery')?'checked':'') %> name="genre" value="Mystery">Mystery</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Psychological')?'checked':'') %> name="genre"
                        value="Psychological">Psychological</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Romance')?'checked':'') %> name="genre" value="Romance">Romance</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Sci-Fi')?'checked':'') %> name="genre" value="Sci-Fi">Sci-Fi</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Slice of Life')?'checked':'') %> name="genre" value="Slice of Life">Slice of
                      Life</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Space')?'checked':'') %> name="genre" value="Space">Space</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Special')?'checked':'') %> name="genre" value="Special">Special</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Sports')?'checked':'') %> name="genre" value="Sports">Sports</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Super Power')?'checked':'') %> name="genre" value="Super Power">Super
                      Power</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Supernatural')?'checked':'') %> name="genre"
                        value="Supernatural">Supernatural</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Thriller')?'checked':'') %> name="genre" value="Thriller">Thriller</label>
                    <label class="checkbox-inline"><input type="checkbox" <%- (a.genre.includes('Vampire')?'checked':'') %> name="genre" value="Vampire">Vampire</label>
                  </div>

                  <div class="form-group">
                    <input type="radio" name="ongoing" <%- (a.genre.ongoing?'checked':'') %> value="true" required> Ongoing
                    <input type="radio" name="ongoing"  <%- (!a.genre.ongoing?'checked':'') %> value="false"> Finished<br>
                  </div>
                  <button type="submit" class="btn btn-primary" id="editanime">Update</button>
                </form>
              </div>
            </div>
          </div>
        </div>
        <% }) %>
        <%}%>
        </table>

      </div>
    </div>


    <!-- The Modal -->
    <div class="modal" id="addAnimeModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Add Anime</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          <!-- Modal body -->
          <div class="modal-body">
            <form action="/admin/addAnime" method="POST">
              <div class="form-group">
                <label for="name">Name</label>
                <input type="name" name="name" class="form-control" id="name" placeholder="name" autofocus required>
              </div>

              <div class="form-group">
                <label for="image">Image Id</label>
                <input type="text" name="image" class="form-control" id="image" placeholder="image ID">
              </div>
              <div class="form-group">
                <label for="description">Descriptiom</label>
                <textarea type="text" name="description" rows="5" class="form-control" id="description"></textarea>
              </div>
              <div class="form-group">
                <label for="genre">Genre</label><br>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Action">Action</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Adventure">Adventure</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Comedy">Comedy</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Drama">Drama</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Fantasy">Fantasy</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Game">Game</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Historical">Historical</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Horror">Horror</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Magic">Magic</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Martial Arts">Martial Arts</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Music">Music</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Mystery">Mystery</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Psychological">Psychological</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Romance">Romance</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Sci-Fi">Sci-Fi</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Slice of Life">Slice of Life</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Space">Space</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Special">Special</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Sports">Sports</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Super Power">Super Power</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Supernatural">Supernatural</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Thriller">Thriller</label>
                <label class="checkbox-inline"><input type="checkbox" name="genre" value="Vampire">Vampire</label>
              </div>

              <div class="form-group">
                <input type="radio" name="ongoing" value="true" required> Ongoing
                <input type="radio" name="ongoing" value="false"> Finished<br>
              </div>
              <button type="submit" class="btn btn-primary" id="addanime">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <% include ./components/footer%>
    <script type="text/javascript">
    $(document).ready(function () {
      $('#addanime').click(function() {
        checked = $("#addAnimeModal input[type=checkbox]:checked").length;
        if(!checked) {
          alert("You must check at least one checkbox.");
          return false;
        }

      });
    });
    </script>
  </body>
</html>